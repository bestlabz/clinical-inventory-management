import{j as e,x as C,y as w,a as R,r as o,F as D,h as S,T as r,z as O}from"./index-DXCadrFQ.js";import{b as q}from"./index-Df58Q9ES.js";import{R as E}from"./ResponsiveSuccessmodal-B_6b-9MN.js";import{S as F}from"./Select-wHze5Tou.js";import"./Layout-OzvLW8TI.js";const V=({value:t,setValue:l,placeholder:d="",type:p="text",length:n,err:s,def:a,id:i="",name:c="",showLength:x,errwidth:h="100%",errtop:g="100%",label:m})=>e.jsxs("div",{className:"input-container1",children:[e.jsx("label",{className:"input-label1",children:m}),e.jsxs("div",{className:"input-box1",children:[e.jsx("input",{id:i,name:c,className:`input1 ${s?"err-border":"border-gray-300"}`,type:p,maxLength:n,placeholder:d,value:t,onChange:l,defaultValue:a}),n&&x&&e.jsxs("span",{className:"input-length",children:[" ",(t==null?void 0:t.length)||0,"/",n," "]})]}),s&&e.jsx("span",{style:{top:g,width:h},className:"err-txt",children:s})]}),U=C().shape({medicine_name:w().required("Medicine name is required"),dasage_strength:w().required("Dasage strength is required")}),$=()=>{const t=R(),[l,d]=o.useState(!1),[p,n]=o.useState(!1),[s,a]=o.useState(null),[i,c]=o.useState(null),[x,h]=o.useState([]),[g,m]=o.useState([]);o.useEffect(()=>{(async()=>{try{const[u,j]=await Promise.all([S.get("/dosageform"),S.get("/dosageunit")]);if(u.success){const b=u.dosageForms.map(f=>({label:f.form_name,value:f._id}));h(b)}if(j.success){const b=j.dosageUnits.map(f=>({label:f.unit_name,value:f._id}));m(b)}}catch(u){console.error("Error fetching data",u)}})()},[]);const v=async(y,u)=>{if(!s||!i)return d(!0);const j={medicine_name:y.medicine_name,dosage_strength:y.dasage_strength,dosage_form:s.label,dosage_unit:i.label},{success:b}=await S.post("/medicines",j);if(b){n(!0),a(null),c(null),setTimeout(()=>{n(!1),u.resetForm()},3e3);return}},{errors:_,handleChange:N,handleSubmit:k,values:I,resetForm:A}=D({initialValue:{medicine_name:"",dasage_strength:""},schema:U,submitFunction:v});return{goBack:()=>{t(-1)},handleSubmit:k,values:I,handleChange:N,errors:_,handelClick:()=>{d(!0),setTimeout(()=>{d(!1)},3e3)},validateErr:l,modalPopup:p,style:{width:"100%",padding:"7px",border:`1px solid ${l&&!s?"red":"#d3d3d3"}`,borderRadius:"8px",outline:"1px solid #d3d3d3",background:"rgba(218, 227, 255, 0.31)"},dosageFormsOptions:x,dosageUnitOptions:g,setSelectedItem:a,selectedItem:s,setSelectedItem1:c,selectedItem1:i,style1:{width:"100%",padding:"7px",border:"1px solid transparent",borderRadius:"8px",outline:"1px solid transparent",background:"rgba(218, 227, 255, 0.31)"}}},K=()=>{const{errors:t,goBack:l,handleChange:d,handleSubmit:p,values:n,handelClick:s,validateErr:a,modalPopup:i,dosageFormsOptions:c,dosageUnitOptions:x,style:h,style1:g,selectedItem:m,setSelectedItem:v,selectedItem1:_,setSelectedItem1:N}=$();return e.jsxs("div",{className:" w-full h-full pt-0 p-3 overflow-auto",children:[e.jsxs("div",{style:{boxShadow:"0 5px 5px -8px rgba(0, 0, 0, .9), 0 2px 8px -3px rgba(0, 0, 0, .6)"},className:"add-medicine-top",children:[e.jsx(q,{className:" cursor-pointer",size:20,onClick:l}),e.jsx("p",{className:"add-medicine-top-text",children:"Add Medicine"})]}),e.jsxs("form",{autoComplete:"off",onSubmit:p,children:[e.jsxs("div",{className:"add-medicine-body",children:[e.jsxs("div",{className:"add-medicine-body-content",children:[e.jsx("label",{children:r.add_medicine.label.name}),e.jsx(O,{placeholder:r.add_medicine.placeholder.name,id:"medicine_name",name:"medicine_name",setValue:d,value:n.medicine_name,err:a&&t.medicine_name})]}),e.jsxs("div",{className:"add-medicine-body-content",children:[e.jsx("label",{children:r.add_medicine.label.dasage_form}),e.jsxs("div",{className:" mt-[18px] relative",children:[e.jsx(F,{styles:h,options:c,placeholder:r.add_medicine.placeholder.dasage_form,SelectedValue:v,value:m}),a&&m===null&&e.jsx("span",{className:"err-txt absolute mt-[1px]",children:"Required Dasage Form"})]})]}),e.jsxs("div",{className:"add-medicine-body-content",children:[e.jsx("label",{children:r.add_medicine.label.dasage_strength}),e.jsxs("div",{className:`flex items-end border-[1px] ${a?"border-red-500":"border-gray-300"} rounded-xl`,children:[e.jsx("div",{className:" flex-1 items-center",children:e.jsx(V,{placeholder:r.add_medicine.placeholder.dasage_strength,id:"dasage_strength",name:"dasage_strength",errtop:"140%",setValue:d,value:n.dasage_strength,err:a&&t.dasage_strength})}),e.jsx("div",{className:" 2xl:w-[25%] xl:w-[25%] lg:w-[25%] md:w-[30%] sm:w-[30%] xs:w-[50%] mobile:w-[60%] xss:w-[50%]",children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{styles:g,options:x,placeholder:r.add_medicine.placeholder.dasage_unit,SelectedValue:N,value:_}),a&&_===null&&e.jsx("span",{className:"err-txt absolute mt-[1px]",children:"Required Dasage Form"})]})})]})]})]}),e.jsx("div",{className:"add-medicine-footer",children:e.jsx("button",{type:"submit",className:"add-medicine-footer-button",onClick:s,children:r.add_medicine.button})})]}),i&&e.jsx(E,{modalPopup:i})]})};export{K as default};
